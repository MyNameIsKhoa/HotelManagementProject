<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>L·ªãch s·ª≠ ƒë·∫∑t ph√≤ng</title>


    <link rel="stylesheet" th:href="@{/css/header.css}">


    <link rel="stylesheet" th:href="@{/css/booking-history.css}">
</head>

<body>


<div th:replace="fragments/header :: header"></div>

<!-- ===== CONTENT ===== -->
<main class="page-content">
    <div class="booking-history-container">

        <h2 class="booking-history-title">üìÑ L·ªãch s·ª≠ ƒë·∫∑t ph√≤ng c·ªßa b·∫°n</h2>

        <table class="booking-table">
            <thead>
            <tr>
                <th>ID</th>
                <th>Lo·∫°i ph√≤ng</th>
                <th>Check-in</th>
                <th>Check-out</th>
                <th>T·ªïng ti·ªÅn</th>
                <th>Tr·∫°ng th√°i</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="booking : ${bookings}">
                <td th:text="${booking.bookingId}">1</td>
                <td th:text="${booking.roomType.name}">Deluxe Room</td>
                <td th:text="${booking.checkinDate}">2026-01-30</td>
                <td th:text="${booking.checkoutDate}">2026-02-02</td>
                <td th:text="${booking.totalPrice}">1200000</td>

                <td th:text="${booking.status}"
                    th:class="'status-' + ${booking.status}">
                    CONFIRMED
                </td>

                <td>
                    <form th:if="${booking.status.name() == 'PENDING_DEPOSIT'
       or booking.status.name() == 'CONFIRMED'
       or booking.status.name() == 'ASSIGNED'}"

                          th:action="@{/booking/cancel}"
                          method="post"
                          style="margin:0;">
                        <input type="hidden"
                               name="bookingId"
                               th:value="${booking.bookingId}"/>

                        <button class="btn-cancel"
                                type="submit"
                                onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën h·ªßy booking n√†y kh√¥ng?')">
                            ‚ùå H·ªßy
                        </button>
                    </form>
                </td>
            </tr>

            <!-- EMPTY -->
            <tr th:if="${#lists.isEmpty(bookings)}">
                <td colspan="7" class="empty-booking">
                    B·∫°n ch∆∞a c√≥ ƒë∆°n ƒë·∫∑t ph√≤ng n√†o
                </td>
            </tr>

            </tbody>
        </table>

        <a class="back-home" th:href="@{/}">‚¨Ö Quay v·ªÅ trang ch·ªß</a>

    </div>
</main>

</body>
</html>
