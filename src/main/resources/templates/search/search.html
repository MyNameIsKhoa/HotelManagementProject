<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Hotel Search</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <link rel="stylesheet" th:href="@{/css/search.css}">
</head>
<body>
<div th:replace="fragments/header :: header"></div>

<!-- SEARCH FORM -->
<div class="search-container">
    <h2>Search hotels</h2>

    <form th:action="@{/search}" method="get" class="search-form">
        <div class="form-group">
            <label for="checkinDate">Check-in:</label>
            <input type="datetime-local"
                   name="checkinDate"
                   th:value="${checkinDate != null ? #temporals.format(checkinDate, 'yyyy-MM-dd''T''HH:mm') : ''}"
                   id="checkinDate"
                   required>
        </div>

        <div class="form-group">
            <label for="checkoutDate">Check-out:</label>
            <input type="datetime-local"
                   name="checkoutDate"
                   th:value="${checkoutDate != null ? #temporals.format(checkoutDate, 'yyyy-MM-dd''T''HH:mm') : ''}"
                   id="checkoutDate"
                   required>
        </div>

        <button type="submit" class="btn-search">Search</button>
    </form>
</div>


<hr>

<!-- SEARCH RESULT -->
<div class="container" th:if="${results != null}">

    <h3>Available hotels</h3>

    <!-- No results message -->
    <div th:if="${results.isEmpty()}" class="no-results">
        <p>No hotels found for your search criteria. Please try different dates.</p>
    </div>

    <!-- Results -->
    <div th:if="${!results.isEmpty()}" th:each="entry : ${results}">
        <hr>

        <!-- HOTEL -->
        <h4 th:text="${entry.key.name}"></h4>
        <p th:text="${entry.key.address}"></p>

        <!-- ROOM TYPES -->
        <div th:each="row : ${entry.value}">
            <div class="room-type-card">

                <h5 th:text="${row[0].name}"></h5>

                <p>
                    Price:
                    <span th:text="${row[0].basePrice}"></span>
                </p>

                <p>
                    Capacity:
                    <span th:text="${row[0].capacity}"></span>
                </p>

                <p>
                    Available rooms:
                    <span th:text="${row[1]}"></span>
                </p>

                <!-- LINK TO ROOM DETAIL -->
                <a class="btn-view-detail" th:href="@{/room/{id}(
                        id=${row[0].roomTypeId},
                        checkinDate=${checkinDate},
                        checkoutDate=${checkoutDate}
                )}">
                    Xem Chi tiáº¿t
                </a>

            </div>
        </div>
    </div>

</div>
<div th:replace="fragments/footer :: footer"></div>

</body>
</html>