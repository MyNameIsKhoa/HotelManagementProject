1ï¸âƒ£ User
ğŸ”¹ Ã nghÄ©a

Äáº¡i diá»‡n cho ngÆ°á»i dÃ¹ng há»‡ thá»‘ng:

KhÃ¡ch hÃ ng (GUEST)

NhÃ¢n viÃªn / admin (ADMIN, STAFF)

ğŸ”¹ LiÃªn káº¿t

User 1 â€”â€” n Booking

Má»™t user cÃ³ thá»ƒ Ä‘áº·t nhiá»u booking

User 1 â€”â€” 1 AiProfile

User 1 â€”â€” n SearchHistory

ğŸ”¹ DÃ¹ng á»Ÿ workflow

WF1: Ä‘Äƒng nháº­p, Ä‘áº·t phÃ²ng

WF2: há»§y phÃ²ng

WF6: AI há»c hÃ nh vi

ğŸ“Œ VÃ¬ sao User khÃ´ng cÃ³ List<Booking>?

Äá»ƒ trÃ¡nh mapping 2 chiá»u phá»©c táº¡p, phÃ¹ há»£p checkpoint 1.

2ï¸âƒ£ Hotel
ğŸ”¹ Ã nghÄ©a

Äáº¡i diá»‡n cho má»™t khÃ¡ch sáº¡n váº­t lÃ½
(vÃ¬ há»‡ thá»‘ng cÃ³ thá»ƒ má»Ÿ rá»™ng nhiá»u khÃ¡ch sáº¡n)

ğŸ”¹ LiÃªn káº¿t

Hotel 1 â€”â€” n RoomType

ğŸ”¹ DÃ¹ng á»Ÿ workflow

GiÃ¡n tiáº¿p trong WF1, WF5

Chá»§ yáº¿u Ä‘á»ƒ má»Ÿ rá»™ng vá» sau

ğŸ“Œ Hiá»‡n táº¡i chÆ°a cáº§n dÃ¹ng máº¡nh â†’ váº«n OK.

3ï¸âƒ£ RoomType
ğŸ”¹ Ã nghÄ©a

Äáº¡i diá»‡n cho loáº¡i phÃ²ng (Deluxe, Standard, Suiteâ€¦)

ÄÃ¢y lÃ  entity quan trá»ng nháº¥t khi tÃ¬m kiáº¿m phÃ²ng

ğŸ”¹ LiÃªn káº¿t

RoomType n â€”â€” 1 Hotel

RoomType 1 â€”â€” n Room

RoomType 1 â€”â€” n PricePolicy

RoomType 1 â€”â€” n Booking

RoomType 1 â€”â€” n Recommendation

ğŸ”¹ DÃ¹ng á»Ÿ workflow

WF1: tÃ¬m kiáº¿m, xem chi tiáº¿t, Ä‘áº·t phÃ²ng

WF5: quáº£n trá»‹ phÃ²ng & giÃ¡

WF6: AI gá»£i Ã½

ğŸ“Œ LÃ½ do Booking gáº¯n vá»›i RoomType thay vÃ¬ Room:

Khi Ä‘áº·t phÃ²ng online, khÃ¡ch chá»‰ chá»n loáº¡i phÃ²ng, chÆ°a biáº¿t phÃ²ng cá»¥ thá»ƒ.

4ï¸âƒ£ Room
ğŸ”¹ Ã nghÄ©a

Äáº¡i diá»‡n cho phÃ²ng váº­t lÃ½ cá»¥ thá»ƒ:

P101, P102, P201â€¦

ğŸ”¹ LiÃªn káº¿t

Room n â€”â€” 1 RoomType

Room 1 â€”â€” n Booking (theo thá»i gian)

ğŸ”¹ DÃ¹ng á»Ÿ workflow

WF3 (Check-in): gÃ¡n phÃ²ng tháº­t cho booking

WF5: quáº£n lÃ½ phÃ²ng

ğŸ“Œ Trong WF1:

room = NULL â†’ ráº¥t Ä‘Ãºng nghiá»‡p vá»¥.

5ï¸âƒ£ RoomImage
ğŸ”¹ Ã nghÄ©a

LÆ°u áº£nh minh há»a cho loáº¡i phÃ²ng

ğŸ”¹ LiÃªn káº¿t

RoomType 1 â€”â€” n RoomImage

ğŸ”¹ DÃ¹ng á»Ÿ workflow

WF1: xem chi tiáº¿t phÃ²ng

6ï¸âƒ£ PricePolicy
ğŸ”¹ Ã nghÄ©a

Äáº¡i diá»‡n cho chÃ­nh sÃ¡ch giÃ¡ theo thá»i gian

Lá»…

Cuá»‘i tuáº§n

MÃ¹a cao Ä‘iá»ƒm

ğŸ”¹ LiÃªn káº¿t

RoomType 1 â€”â€” n PricePolicy

ğŸ”¹ DÃ¹ng á»Ÿ workflow

WF5: admin thiáº¿t láº­p giÃ¡

WF1: tÃ­nh tá»•ng tiá»n

ğŸ“Œ VÃ­ dá»¥:

base_price = 1tr
multiplier = 1.2 â†’ giÃ¡ lá»… = 1.2tr

7ï¸âƒ£ Booking (TRUNG TÃ‚M Há»† THá»NG)
ğŸ”¹ Ã nghÄ©a

Äáº¡i diá»‡n cho má»™t láº§n Ä‘áº·t phÃ²ng

ğŸ”¹ LiÃªn káº¿t

Booking n â€”â€” 1 User

Booking n â€”â€” 1 RoomType

Booking n â€”â€” 1 Room (nullable)

Booking 1 â€”â€” 1 Payment

Booking 1 â€”â€” n ServiceUsage

Booking 1 â€”â€” 1 Review

ğŸ”¹ DÃ¹ng á»Ÿ workflow

WF1: táº¡o booking

WF2: há»§y & hoÃ n tiá»n

WF3: check-in / check-out

WF4: review

ğŸ“Œ Booking.status lÃ  state machine:

PENDING â†’ CONFIRMED â†’ CHECKED_IN â†’ COMPLETED
           â†“
       CANCELLED

8ï¸âƒ£ Payment
ğŸ”¹ Ã nghÄ©a

Äáº¡i diá»‡n cho giao dá»‹ch thanh toÃ¡n cho booking

ğŸ”¹ LiÃªn káº¿t

Payment 1 â€”â€” 1 Booking

ğŸ”¹ DÃ¹ng á»Ÿ workflow

WF1: thanh toÃ¡n

WF2: hoÃ n tiá»n

ğŸ“Œ VÃ¬ sao tÃ¡ch Payment khá»i Booking?

Äá»ƒ tÃ¡ch nghiá»‡p vá»¥ tÃ i chÃ­nh ra khá»i nghiá»‡p vá»¥ Ä‘áº·t phÃ²ng â†’ Ä‘Ãºng thiáº¿t káº¿.

9ï¸âƒ£ ServiceUsage
ğŸ”¹ Ã nghÄ©a

Äáº¡i diá»‡n cho chi phÃ­ phÃ¡t sinh trong thá»i gian á»Ÿ

Ä‚n uá»‘ng

Giáº·t á»§i

Mini bar

ğŸ”¹ LiÃªn káº¿t

Booking 1 â€”â€” n ServiceUsage

ğŸ”¹ DÃ¹ng á»Ÿ workflow

WF3: check-in / check-out

ğŸ”Ÿ Review
ğŸ”¹ Ã nghÄ©a

ÄÃ¡nh giÃ¡ cá»§a khÃ¡ch sau khi á»Ÿ xong

ğŸ”¹ LiÃªn káº¿t

Review 1 â€”â€” 1 Booking

ğŸ”¹ DÃ¹ng á»Ÿ workflow

WF4: review & rating

ğŸ“Œ 1 booking â†’ 1 review â†’ ráº¥t chuáº©n.

1ï¸âƒ£1ï¸âƒ£ SearchHistory
ğŸ”¹ Ã nghÄ©a

LÆ°u hÃ nh vi tÃ¬m kiáº¿m cá»§a user

ğŸ”¹ LiÃªn káº¿t

User 1 â€”â€” n SearchHistory

ğŸ”¹ DÃ¹ng á»Ÿ workflow

WF6: AI há»c sá»Ÿ thÃ­ch

1ï¸âƒ£2ï¸âƒ£ AiProfile
ğŸ”¹ Ã nghÄ©a

Há»“ sÆ¡ sá»Ÿ thÃ­ch cá»§a user cho AI

GiÃ¡

Sá»‘ ngÆ°á»i

Loáº¡i phÃ²ng

ğŸ”¹ LiÃªn káº¿t

AiProfile 1 â€”â€” 1 User

AiProfile 1 â€”â€” n Recommendation

ğŸ”¹ DÃ¹ng á»Ÿ workflow

WF6

1ï¸âƒ£3ï¸âƒ£ Recommendation
ğŸ”¹ Ã nghÄ©a

Káº¿t quáº£ gá»£i Ã½ phÃ²ng cá»§a AI

ğŸ”¹ LiÃªn káº¿t

Recommendation n â€”â€” 1 AiProfile

Recommendation n â€”â€” 1 RoomType

ğŸ”¹ DÃ¹ng á»Ÿ workflow

WF6